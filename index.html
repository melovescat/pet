<!DOCTYPE html>
<html lang="en" class="dark" data-theme="retro-matrix">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1">
    <meta name="description" content="petpet generator - Synthesize high-fidelity digital affection.">
    <meta name="theme-color" content="#4A90E2">
    <meta property="og:title" content="Petpet maker for Yuna <3">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://melovescat.github.io/pet/">
    <meta property="og:image" itemprop="image" content="https://benisland.neocities.org/petpet/img/pet.png">
    <meta property="og:description" itemprop="description" content="High-fidelity petpet GIF generation matrix.">
    <title>Petpet maker for Yuna <3</title>
    <link rel="icon" href="favicon.ico">

    <style type="text/css">
        /* --- Terminal Themes (Multi-Color & Gradient) --- */
        :root {
            /* Shared Styles */
            --bg-color: #000000;
            --border-color: #1a1a1a;
            --input-bg: #0d0d0d;
            --font-mono: 'Inconsolata', 'Fira Mono', monospace;
            --font-sans: 'Inter', sans-serif;
            --radius-sm: 0;
            --error-color: #FF3333;
            
            /* Sizing variable */
            --image-size: 180px;
            
            /* Default Monochromatic Theme */
            --text-color: #39FF14;
            --accent-color: #00FFFF;
            --hand-accent: #39FF14;
        }

        /* --- MONOCHROMATIC THEMES --- */
        
        /* 1. RETRO MATRIX (Default - Green/Cyan Mix) */
        :root[data-theme="retro-matrix"] {
            --text-color: #39FF14;
            --accent-color: #00FFFF; 
            --hand-accent: #39FF14;
        }

        /* 2. FIREWALL BREACH (Red/Yellow Mix) */
        :root[data-theme="firewall-breach"] {
            --text-color: #FFB800; 
            --accent-color: #FF3333; 
            --hand-accent: #FFB800; 
        }
        
        /* 3. VAPORWAVE (Pink/Blue/Purple Mix) */
        :root[data-theme="vaporwave"] {
            --text-color: #FF66CC; 
            --accent-color: #4A90E2; 
            --hand-accent: #C06FE8; 
        }
        
        /* 4. HACKER BLUE (Pure Blue/Cyan) */
        :root[data-theme="hacker-blue"] {
            --text-color: #00BFFF; 
            --accent-color: #4A90E2; 
            --hand-accent: #00FFFF; 
        }
        
        /* --- GRADIENT THEMES (REQUIRES WEBKIT/MOZ SUPPORT) --- */

        /* 5. NEON SPECTRA (Rainbow Gradient) */
        :root[data-theme="neon-spectra"] {
            --accent-color: #FF66CC; 
            --hand-accent: #00FFFF; 
            background-image: linear-gradient(90deg, #FF66CC, #00FFFF, #39FF14, #FFB800);
        }

        /* 6. LAVA FLOW (Red/Orange/Yellow Gradient) */
        :root[data-theme="lava-flow"] {
            --accent-color: #FF3333;
            --hand-accent: #FFB800;
            background-image: linear-gradient(45deg, #FF3333, #FF6600, #FFB800);
        }

        /* Base Styling & Gradient Logic */
        body {
            background-color: var(--bg-color);
            color: var(--text-color);
            font-family: var(--font-mono);
            line-height: 1.6;
            margin: 0;
            padding: 10px;
            text-shadow: 0 0 1px var(--text-color);
            box-shadow: inset 0 0 10px rgba(57, 255, 20, 0.4);
            font-size: 14px;
            overflow-y: auto;
        }
        
        [data-theme="neon-spectra"] *, [data-theme="lava-flow"] * {
            background-image: var(--background-image);
        }
        
        [data-theme="neon-spectra"] .gradient-target, [data-theme="lava-flow"] .gradient-target {
             background-image: var(--background-image);
             color: transparent;
             background-clip: text;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        strong {
            font-weight: 700;
            color: var(--accent-color);
            text-shadow: 0 0 3px var(--accent-color);
        }
        
        .drop-area-file-input { display: none !important; }

        details > summary { list-style: none; }
        details > summary::-webkit-details-marker { display: none; }
        details > summary::before { content: "> "; color: var(--accent-color); }
        details[open] > summary::before { content: "v "; }
        
        .content-heading {
            font-size: 1.1em;
            color: var(--text-color);
            border-bottom: 1px dashed var(--accent-color);
            padding-bottom: 5px;
            margin-top: 15px;
            margin-bottom: 15px;
            font-weight: 400;
            text-transform: uppercase;
        }

        /* --- UNIFORM IMAGE SIZING (180x180) --- */
        .drop-area-preview, .canvas, #result {
            width: var(--image-size);
            height: var(--image-size);
            max-width: 100%;
            border: 2px solid var(--accent-color);
            box-shadow: 0 0 10px var(--accent-color);
            background-color: #0d0d0d;
            margin: 0 auto 15px auto;
            display: block;
        }

        /* --- BUTTON STYLES OVERHAUL --- */
        .btn {
            background-color: transparent;
            color: var(--text-color);
            border: 1px solid var(--accent-color);
            padding: 8px 15px;
            text-transform: uppercase;
            font-weight: 400;
            cursor: pointer;
            transition: all 0.2s;
            border-radius: var(--radius-sm);
            text-align: center;
            display: block;
        }

        .btn:hover {
            background-color: var(--accent-color);
            color: var(--bg-color);
            box-shadow: 0 0 5px var(--accent-color);
        }
        
        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            background-color: var(--input-bg) !important;
            color: var(--text-color) !important;
            box-shadow: none !important;
        }

        /* Playback/Seek Buttons */
        .btn-playback-playpause, .btn-playback-prev, .btn-playback-next {
            color: var(--accent-color);
            border-color: var(--accent-color);
            padding: 10px;
        }
        .btn-playback-playpause:hover, .btn-playback-prev:hover, .btn-playback-next:hover {
            background: var(--accent-color);
            color: var(--bg-color);
        }

        /* Reset Button - Uses Accent Color */
        .btn-reset {
            color: var(--accent-color);
            border-color: var(--accent-color);
        }
        
        /* Execute GIF Synthesis Button - Classic Green */
        .btn-export {
            border-color: #39FF14;
            color: #39FF14;
        }
        .btn-export:hover {
            background-color: #39FF14;
            color: var(--bg-color);
            box-shadow: 0 0 10px #39FF14;
        }

        /* Download Button - Cyan for distinct action */
        .btn-download {
            border-color: #00FFFF; 
            color: #00FFFF;
        }
        .btn-download:hover {
            background-color: #00FFFF;
            color: var(--bg-color);
            box-shadow: 0 0 10px #00FFFF;
        }
        
        /* End Button Styles */
        
    </style>
    <script>
        document.addEventListener("DOMContentLoaded", () => {
            const headingElement = document.getElementById("typing-heading");
            const themeSelector = document.getElementById("theme-selector");
            const htmlElement = document.documentElement;
            const canvas = document.getElementById("canvas");
            const body = document.body;
            
            // --- SCROLL LOCK LOGIC ---
            let isDragging = false;
            
            canvas.addEventListener("pointerdown", (e) => {
                if(document.getElementById("toggleAdjust").checked) {
                    isDragging = true;
                    body.classList.add("scroll-lock");
                }
            });
            
            ["pointerup", "pointerout"].forEach(event => {
                canvas.addEventListener(event, (e) => {
                    if (isDragging) {
                        isDragging = false;
                        body.classList.remove("scroll-lock");
                    }
                });
            });

            // --- UI/THEME LOGIC ---
            const savedTheme = localStorage.getItem("petpet-theme") || "retro-matrix";
            
            const applyTheme = (theme) => {
                htmlElement.setAttribute("data-theme", theme);
                localStorage.setItem("petpet-theme", theme);
                
                const isGradient = theme === "neon-spectra" || theme === "lava-flow";
                const gradientTargets = document.querySelectorAll('.gradient-target');
                
                gradientTargets.forEach(el => {
                    if (isGradient) {
                        el.classList.add('gradient-text-style');
                    } else {
                        el.classList.remove('gradient-text-style');
                    }
                });
            };

            applyTheme(savedTheme);
            themeSelector.value = savedTheme;

            themeSelector.addEventListener("change", (e) => {
                applyTheme(e.target.value);
            });


            // Typing Animation Setup
            const phrases = [
                "INIT-- PETPET SYNTHESIZER // V2.0 ",
                "ACCESS DENIED-- TOO FOINE TO ENTER",
                "YUNA IS THE SWEETEST <3",
                "DRINK WATER-",
                "NUH UH.."
            ];
            let phraseIndex = 0;
            let charIndex = 0;
            let isDeleting = false;
            let typingSpeed = 70;
            const initialDelay = 1500;
            const phraseChangeDelay = 500;

            function type() {
                const currentPhrase = phrases[phraseIndex];
                
                if (isDeleting) {
                    headingElement.innerHTML = currentPhrase.substring(0, charIndex - 1) + '<span class="typing-cursor"></span>';
                    charIndex--;
                    typingSpeed = 30;
                } else {
                    headingElement.innerHTML = currentPhrase.substring(0, charIndex + 1) + '<span class="typing-cursor"></span>';
                    charIndex++;
                    typingSpeed = 70;
                }

                if (!isDeleting && charIndex > currentPhrase.length) {
                    isDeleting = true;
                    setTimeout(type, initialDelay);
                    return;
                } else if (isDeleting && charIndex <= 0) {
                    isDeleting = false;
                    phraseIndex = (phraseIndex + 1) % phrases.length;
                    charIndex = 0;
                    typingSpeed = 150;
                }

                setTimeout(type, typingSpeed);
            }

            setTimeout(type, 100);

            document.querySelectorAll("a.e").forEach(x => { x.href = x.dataset.href }); 
        });
    </script>
    <link href="https://unpkg.com/jam-icons/css/jam.min.css" rel="stylesheet">
</head>

<body>
    <main class="grid">
        <header class="header">
            <div class="heading gradient-target" id="typing" style="font-size:2.5vh;font-style:bold;">SYSTEM64 :</div><div class="heading gradient-target" id="typing-heading" style="font-size:3vh;font-style:bold;"></div>
            <div>
                <span style="color: var(--error-color)">[ACCESS WARNING]:</span>We accept zero liability.
                <p class="help" style="margin-top: 5px;">Made for: <strong>YUNA</strong>. Customizable theme :) [u hv better taste prolly]</p>
            </div>
        </header>
        
        <div class="theme-select">
            <details>
                <summary>SELECT theme</summary>
                <select id="theme-selector">
                    <option value="retro-matrix">Retro Matrix (Green/Cyan)</option>
                    <option value="firewall-breach">Firewall Breach (Red/Amber)</option>
                    <option value="vaporwave">Vaporwave (Pink/Purple)</option>
                    <option value="hacker-blue">Hacker Blue (Blue/Cyan)</option>
                    <option value="neon-spectra">-- GRADIENT: Neon Spectra --</option>
                    <option value="lava-flow">-- GRADIENT: Lava Flow --</option>
                </select>
            </details>
        </div>

        <section class="upload content">
            <div class="content-heading gradient-target">>> INPUT FILE HERE</div>
            <div class="upload-preview">
                <label class="drop-area preview-image-container" id="dropArea" for="uploadFile">
                    <div class="drop-area-input">
                        <input class="drop-area-file-input" type="file" id="uploadFile" accept="image/*">
                        
                        <img width="112" height="112" class="drop-area-preview preview-image" src="index.html" id="uploadPreview">
                        
                        <div class="drop-area-upload-text">
                            <label id="uploadFileName" class="drop-area-upload-filename gradient-target">CLICK/DRAG/DROP DATA</label>
                        </div>
                    </div>
                </label>
                
                <details>
                    <summary class="gradient-target">REMOTE ACCESS</summary>
                    <div class="content-body">
                        <div class="content-heading gradient-target">>> REMOTE URI INPUT</div>
                        <div class="row control-group">
                            <input class="control control-group-l control-has-icon control-grouped-left" type="url" required
                                placeholder="Paste remote data URI (URL)" id="uploadUrl">
                            <button type="submit" class="btn control-icon control-grouped-right" id="uploadUrlBtn"><i
                                    class="jam jam-upload"></i></button>
                        </div>
                        <p id="uploadError" class="error-message"></p>
                        <p class="help"><strong>WARNING</strong>: other servers hate you. Local upload is safer.</p>
                    </div>
                </details>
            </div>
        </section>

        <section class="preview content">
            <div class="content-heading gradient-target">>> SYNTHESIS PREVIEW MATRIX</div>
            <div class="preview-canvas">
                <canvas height="112" width="112" id="canvas" class="canvas" tabindex="1"></canvas>
                <div class="preview-playback">
                    <button id="prev" class="btn btn-playback-prev control-grouped-left">
                        <i class="jam jam-set-backward"></i>
                    </button>
                    <button id="play" class="btn btn-playback-playpause control-grouped-center">
                        <i class="jam jam-play btn-playback-play"></i>
                        <i class="jam jam-pause btn-playback-pause"></i>
                    </button>
                    <button id="next" class="btn btn-playback-next control-grouped-right">
                        <i class="jam jam-set-forward"></i>
                    </button>
                </div>
            </div>

            <details>
                <summary class="gradient-target">ADJUSTMENT CONTROLS</summary>
                <div class="preview-controls">
                    <div class="content-heading gradient-target">>> HAND ADJUSTER</div>
                    <div class="row control-group">
                        <label for="handScale" class="control-label control-group-s">SCALE</label>
                        <input id="handScale" class="control-range control-group-l" type="range" step="1" min="50" max="300"
                            value="100">
                    </div>
                    <div class="row control-group">
                        <label for="handYOffset" class="control-label control-group-s">Y-OFFSET</label>
                        <input id="handYOffset" class="control-range control-group-l" type="range" step="1" min="-50" max="50"
                            value="0">
                    </div>
                    
                    <div class="content-heading gradient-target">>> IMAGE ADJUSTER</div>
                    <div class="row">
                        <div class="control-group">
                            <label for="toggleAdjust" class="control-label control-group-l">OVERRIDE</label>
                            <label for="toggleAdjust" class="toggle-switch">
                                <input id="toggleAdjust" type="checkbox" class="toggle-switch-input">
                                <span class="toggle-switch-control"></span>
                            </label>
                        </div>
                        <div class="hint">Enable drag/arrow control. It's not hard, just skill issues.</div>
                    </div>
                    <div class="row control-group">
                        <label for="toggleFlip" class="control-label control-group-s">FLIP</label>
                        <label for="toggleFlip" class="toggle-switch sm">
                            <input id="toggleFlip" type="checkbox" class="toggle-switch-input">
                            <span class="toggle-switch-control"></span>
                        </label>
                    </div>
                    <div class="row control-group">
                        <label for="scale" class="control-label control-group-s">SCALE</label>
                        <input id="scale" class="control-range control-group-l" type="range" step="1" min="15" max="200" value="85">
                    </div>
                    <div class="row control-group">
                        <label for="squish" class="control-label control-group-s">SQUISH</label>
                        <input id="squish" class="control-range control-group-l" type="range" step="1" min="100" max="300"
                            value="125">
                    </div>
                </div>
            </details>
            <div class="content-heading gradient-target">>> FRAME SYNC</div>
            <div class="row control-group">
                <label for="fps" class="control-label control-group-s">RATE (Hz)</label>
                <input id="fps" class="control-range" type="range" step="2" min="2" max="60" value="16">
                <input type="number" id="fpsVal" class="control control-sm" step="1" min="2" max="60" value="16">
            </div>
            
            <div class="row export-row">
                <div class="control-group">
                    <button id="reset" class="btn btn-reset control-group-s">RESET CONFIG</button>
                    <div class="spacer" style="width:0.382em"></div>
                    <button id="export" class="btn btn-export control-group-l">EXECUTE .GIF GENERATION</button>
                </div>
            </div>
        </section>

        <section class="output content" id="outputSection">
            <div class="content-heading gradient-target">>> FINAL .GIF OUTPUT</div>
            <figure class="preview-image-container">
                <img width="112" height="112" class="preview-image" id="result">
                <div class="help output-info" id="info">Waiting for data stream...</div>
                <button id="downloadGif" class="btn btn-download" disabled style="margin-top: 10px;">
                    <i class="jam jam-download"></i> DOWNLOAD DATA FILE
                </button>
            </figure>
            
            <details>
                <summary class="gradient-target">>.GIF dwnld</summary>
                <div class="content-body">
                    <p class="help">
                        <strong>WARNING</strong>: generated gif is temporary. Download it, or lose it.
                    </p>
                    <p class="help">If it glitches: It's your browser. Code's perfect.</p>
                </div>
            </details>
            </section>

        <footer class="footer help">
            <div>
                <a href="#">LEGACY V1 (Don't.)</a>
                <span class="separator">|</span>
                RESOURCES: <a href="img/template.gif" target="_blank">GIF</a>, <a href="img/sprite.png"
                    target="_blank">SPRITE</a>
                <span class="separator">|</span>
                FRAMEWORK: <strong>gif.js</strong> (Because we could.)
            </div>
            <br>
            <a class="e fingies" id="fg" data-href="https://github.com/melovescat/pet" title="ðŸ˜³" target="_blank">
                <span class="fl">ðŸ‘‰</span><span>ðŸ‘ˆ</span>
            </a>
            <br>
        </footer>
    </main>

    <script src="requestInterval.js"></script>
    <script src="gif.js"></script>
    <script src="main.js"></script>
</body>

</html>
